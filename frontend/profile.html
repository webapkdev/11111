<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Profile</title>
<link rel="stylesheet" href="/style.css">
</head>
<body>
<header class="topbar">
  <div class="brand">Profile</div>
  <div style="flex:1"></div>
  <a class="btn" href="/index.html">Back to Store</a>
</header>

<main class="container">
  <section class="upload-card">
    <h3>Your profile</h3>
    <p id="pInfo">Loading...</p>
    <p id="pName"></p>
    <p id="pRole"></p>
    <div style="margin-top:10px">
      <a class="btn" id="toDev" href="/developer.html" style="display:none">Developer Console</a>
      <a class="btn" id="toAdmin" href="/admin.html" style="display:none">Admin Console</a>
    </div>
  </section>
</main>

<script src="/script.js"></script>

<script>
  (function(){
    const raw = localStorage.getItem("apk_user");
    if (!raw) { window.location.href = "/login.html"; return; }
    const user = JSON.parse(raw);
    document.getElementById("pName").innerText = "User: " + user.username;
    document.getElementById("pRole").innerText = "Role: " + user.role;
    document.getElementById("pInfo").innerText = "Local-only profile (server does not store sessions in this example).";
    if (user.role === "developer" || user.role === "admin") document.getElementById("toDev").style.display = "inline-block";
    if (user.role === "admin") document.getElementById("toAdmin").style.display = "inline-block";
  })();
</script>
</body>
</html>
